{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "textarea",
  "title": "TextareaField",
  "description": "A multi-line textarea field component for BuzzForm. Supports auto-resize, character count, copy-to-clipboard, and all TextareaField options.",
  "dependencies": [
    "@buildnbuzz/buzzform"
  ],
  "registryDependencies": [
    "@buzzform/init",
    "textarea",
    "field",
    "@buzzform/copy"
  ],
  "files": [
    {
      "path": "registry/base/fields/textarea.tsx",
      "content": "\"use client\";\r\n\r\nimport React, { useRef, useEffect, useCallback } from \"react\";\r\nimport type {\r\n  TextareaField as TextareaFieldType,\r\n  FormAdapter,\r\n} from \"@buildnbuzz/buzzform\";\r\nimport { getFieldWidthStyle } from \"@buildnbuzz/buzzform\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { CopyButton } from \"@/components/buzzform/copy\";\r\nimport {\r\n  Field,\r\n  FieldContent,\r\n  FieldDescription,\r\n  FieldError,\r\n  FieldLabel,\r\n} from \"@/components/ui/field\";\r\n\r\nexport interface TextareaFieldProps {\r\n  field: TextareaFieldType;\r\n  path: string;\r\n  form: FormAdapter;\r\n  autoFocus?: boolean;\r\n  formValues: Record<string, unknown>;\r\n  siblingData: Record<string, unknown>;\r\n  // Computed props\r\n  fieldId: string;\r\n  label: string | null;\r\n  isDisabled: boolean;\r\n  isReadOnly: boolean;\r\n  error?: string;\r\n}\r\n\r\nexport function TextareaField({\r\n  field,\r\n  path,\r\n  form,\r\n  autoFocus,\r\n  fieldId,\r\n  label,\r\n  isDisabled,\r\n  isReadOnly,\r\n  error,\r\n}: TextareaFieldProps) {\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n  const value = form.watch<string>(path) ?? \"\";\r\n  const hasError = !!error;\r\n\r\n  // Auto-resize logic\r\n  const adjustHeight = useCallback(() => {\r\n    const textarea = textareaRef.current;\r\n    if (textarea && field.autoResize) {\r\n      // Reset height to auto to get the correct scrollHeight\r\n      textarea.style.height = \"auto\";\r\n      // Set height to scrollHeight to fit content\r\n      textarea.style.height = `${textarea.scrollHeight}px`;\r\n    }\r\n  }, [field.autoResize]);\r\n\r\n  // Adjust height on value change\r\n  useEffect(() => {\r\n    adjustHeight();\r\n  }, [value, adjustHeight]);\r\n\r\n  // Adjust height on mount\r\n  useEffect(() => {\r\n    adjustHeight();\r\n  }, [adjustHeight]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    form.setValue(path, e.target.value, {\r\n      shouldDirty: true,\r\n    });\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    form.onBlur?.(path);\r\n  };\r\n\r\n  // Character count for maxLength\r\n  const showCharCount = field.maxLength !== undefined;\r\n  const charCount = value.length;\r\n  const isOverLimit =\r\n    field.maxLength !== undefined && charCount > field.maxLength;\r\n\r\n  return (\r\n    <Field\r\n      className={field.style?.className}\r\n      data-invalid={hasError}\r\n      data-disabled={isDisabled}\r\n      style={getFieldWidthStyle(field.style)}\r\n    >\r\n      {label && (\r\n        <FieldLabel htmlFor={fieldId} className=\"gap-1 items-baseline\">\r\n          {label}\r\n          {field.required && <span className=\"text-destructive\">*</span>}\r\n        </FieldLabel>\r\n      )}\r\n\r\n      <FieldContent>\r\n        <div className=\"relative\">\r\n          <Textarea\r\n            ref={textareaRef}\r\n            id={fieldId}\r\n            name={path}\r\n            value={value}\r\n            onChange={handleChange}\r\n            onBlur={handleBlur}\r\n            placeholder={field.placeholder}\r\n            disabled={isDisabled}\r\n            readOnly={isReadOnly}\r\n            autoComplete={field.autoComplete}\r\n            aria-invalid={hasError}\r\n            aria-describedby={\r\n              field.description ? `${fieldId}-description` : undefined\r\n            }\r\n            minLength={field.minLength}\r\n            maxLength={field.maxLength}\r\n            required={field.required}\r\n            autoFocus={autoFocus}\r\n            rows={field.rows ?? 3}\r\n            className={field.ui?.copyable ? \"pr-10\" : \"\"}\r\n            style={\r\n              field.autoResize\r\n                ? { resize: \"none\", overflow: \"hidden\" }\r\n                : undefined\r\n            }\r\n          />\r\n          {field.ui?.copyable && value && (\r\n            <CopyButton\r\n              value={value}\r\n              disabled={isDisabled}\r\n              className=\"absolute right-2 top-2 text-muted-foreground hover:text-foreground\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Character count */}\r\n        {showCharCount && (\r\n          <div\r\n            className={`text-xs mt-1 text-right ${\r\n              isOverLimit ? \"text-destructive\" : \"text-muted-foreground\"\r\n            }`}\r\n          >\r\n            {charCount}\r\n            {field.maxLength !== undefined && ` / ${field.maxLength}`}\r\n          </div>\r\n        )}\r\n      </FieldContent>\r\n\r\n      {field.description && (\r\n        <FieldDescription id={`${fieldId}-description`}>\r\n          {field.description}\r\n        </FieldDescription>\r\n      )}\r\n\r\n      {error && <FieldError>{error}</FieldError>}\r\n    </Field>\r\n  );\r\n}\r\n\r\nexport function TextareaFieldSkeleton({ field }: { field: TextareaFieldType }) {\r\n  const label = field.label !== false ? (field.label ?? field.name) : null;\r\n  const rows = field.rows ?? 3;\r\n  // Approximate height: ~24px per row + padding\r\n  const skeletonHeight = rows * 24 + 16;\r\n\r\n  return (\r\n    <Field\r\n      className={field.style?.className}\r\n      style={\r\n        field.style?.width\r\n          ? {\r\n              width:\r\n                typeof field.style.width === \"number\"\r\n                  ? `${field.style.width}px`\r\n                  : field.style.width,\r\n            }\r\n          : undefined\r\n      }\r\n    >\r\n      {label && <div className=\"h-4 w-24 animate-pulse rounded bg-muted\" />}\r\n      <FieldContent>\r\n        <div\r\n          className=\"w-full animate-pulse rounded-lg bg-muted\"\r\n          style={{ height: `${skeletonHeight}px` }}\r\n        />\r\n      </FieldContent>\r\n      {field.description && (\r\n        <div className=\"h-3 w-48 animate-pulse rounded bg-muted\" />\r\n      )}\r\n    </Field>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/buzzform/fields/textarea.tsx"
    }
  ],
  "type": "registry:ui"
}