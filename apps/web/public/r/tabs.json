{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "tabs",
  "title": "TabsField",
  "description": "A tabbed interface layout field for BuzzForm. Organizes fields into horizontal tabs with error badges per tab, support for named tabs (creates nested data structure), tab descriptions, and customizable default tab selection.",
  "dependencies": [
    "@buildnbuzz/buzzform"
  ],
  "registryDependencies": [
    "@buzzform/init",
    "tabs",
    "badge",
    "skeleton"
  ],
  "files": [
    {
      "path": "registry/base/fields/tabs.tsx",
      "content": "\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { getNestedFieldPaths } from \"@buildnbuzz/buzzform\";\r\nimport type {\r\n  TabsField as TabsFieldType,\r\n  Tab,\r\n  FormAdapter,\r\n} from \"@buildnbuzz/buzzform\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { FieldRenderer, type FieldRegistry } from \"./render\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\nexport interface TabsFieldComponentProps {\r\n  field: TabsFieldType;\r\n  path: string;\r\n  form: FormAdapter;\r\n  registry?: FieldRegistry;\r\n  // Computed props\r\n  fieldId: string;\r\n  label: React.ReactNode | null;\r\n  isDisabled: boolean;\r\n  isReadOnly: boolean;\r\n  error?: string;\r\n  autoFocus?: boolean;\r\n}\r\n\r\nconst spacingMap = {\r\n  sm: \"space-y-3\",\r\n  md: \"space-y-4\",\r\n  lg: \"space-y-6\",\r\n} as const;\r\n\r\nconst useTabErrors = (\r\n  form: FormAdapter,\r\n  tab: Tab,\r\n  basePath: string\r\n): number => {\r\n  const errors = form.formState.errors;\r\n\r\n  const tabPath = tab.name\r\n    ? basePath\r\n      ? `${basePath}.${tab.name}`\r\n      : tab.name\r\n    : basePath;\r\n\r\n  const nestedPaths = getNestedFieldPaths(tab.fields, tabPath);\r\n  let errorCount = 0;\r\n\r\n  for (const fieldPath of nestedPaths) {\r\n    const error = errors[fieldPath];\r\n    if (error) {\r\n      errorCount++;\r\n    }\r\n  }\r\n\r\n  return errorCount;\r\n};\r\n\r\ninterface TabTriggerWithBadgeProps {\r\n  tab: Tab;\r\n  index: number;\r\n  path: string;\r\n  form: FormAdapter;\r\n  showErrorBadge: boolean;\r\n}\r\n\r\nfunction TabTriggerWithBadge({\r\n  tab,\r\n  index,\r\n  path,\r\n  form,\r\n  showErrorBadge,\r\n}: TabTriggerWithBadgeProps) {\r\n  const errorCount = useTabErrors(form, tab, path);\r\n\r\n  return (\r\n    <TabsTrigger\r\n      value={String(index)}\r\n      disabled={tab.disabled}\r\n      className={cn(tab.disabled && \"opacity-50 cursor-not-allowed\")}\r\n    >\r\n      <span className=\"flex items-center gap-1.5\">\r\n        {tab.icon && <span className=\"shrink-0\">{tab.icon}</span>}\r\n        <span>{tab.label}</span>\r\n        {showErrorBadge && errorCount > 0 && (\r\n          <Badge variant=\"destructive\" className=\"h-5 px-1.5 text-xs\">\r\n            {errorCount}\r\n          </Badge>\r\n        )}\r\n      </span>\r\n    </TabsTrigger>\r\n  );\r\n}\r\n\r\nexport function TabsField({\r\n  field,\r\n  path,\r\n  form,\r\n  registry,\r\n}: TabsFieldComponentProps) {\r\n  const ui = field.ui;\r\n  const defaultTab = ui?.defaultTab ?? 0;\r\n  const showErrorBadge = ui?.showErrorBadge !== false;\r\n  const variant = ui?.variant ?? \"default\";\r\n  const spacing = ui?.spacing ?? \"md\";\r\n\r\n  if (!field.tabs.length) return null;\r\n\r\n  const resolvedDefaultTab =\r\n    typeof defaultTab === \"string\"\r\n      ? field.tabs.findIndex((t) => t.name === defaultTab)\r\n      : defaultTab;\r\n\r\n  const safeDefaultTab = Math.min(\r\n    Math.max(0, resolvedDefaultTab === -1 ? 0 : resolvedDefaultTab),\r\n    field.tabs.length - 1\r\n  );\r\n\r\n  return (\r\n    <Tabs defaultValue={String(safeDefaultTab)} className=\"w-full\">\r\n      <TabsList variant={variant} className=\"w-full justify-start\">\r\n        {field.tabs.map((tab, i) => (\r\n          <TabTriggerWithBadge\r\n            key={i}\r\n            tab={tab}\r\n            index={i}\r\n            path={path}\r\n            form={form}\r\n            showErrorBadge={showErrorBadge}\r\n          />\r\n        ))}\r\n      </TabsList>\r\n\r\n      {field.tabs.map((tab, i) => {\r\n        const tabPath = tab.name\r\n          ? path\r\n            ? `${path}.${tab.name}`\r\n            : tab.name\r\n          : path;\r\n\r\n        return (\r\n          <TabsContent key={i} value={String(i)} className=\"mt-4\">\r\n            {tab.description && (\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                {tab.description}\r\n              </p>\r\n            )}\r\n            <div className={cn(spacingMap[spacing])}>\r\n              {tab.fields.map((f, j) => {\r\n                const nestedPath =\r\n                  \"name\" in f\r\n                    ? tabPath\r\n                      ? `${tabPath}.${f.name}`\r\n                      : f.name\r\n                    : tabPath;\r\n\r\n                return (\r\n                  <FieldRenderer\r\n                    key={j}\r\n                    field={f}\r\n                    path={nestedPath}\r\n                    form={form}\r\n                    registry={registry}\r\n                  />\r\n                );\r\n              })}\r\n            </div>\r\n          </TabsContent>\r\n        );\r\n      })}\r\n    </Tabs>\r\n  );\r\n}\r\n\r\nexport function TabsFieldSkeleton({ field }: { field: TabsFieldType }) {\r\n  const spacing = field.ui?.spacing ?? \"md\";\r\n\r\n  const renderNestedSkeletons = () => (\r\n    <div className={cn(spacingMap[spacing])}>\r\n      {[...Array(3)].map((_, i) => (\r\n        <div key={i} className=\"space-y-2\">\r\n          <Skeleton className=\"h-4 w-20\" />\r\n          <Skeleton className=\"h-9 w-full rounded-md\" />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div className=\"flex gap-1 mb-4 p-1 bg-muted/50 rounded-lg w-fit\">\r\n        {field.tabs.slice(0, 4).map((tab, i) => (\r\n          <div key={i} className=\"flex items-center gap-1.5 px-2\">\r\n            {tab.icon && <Skeleton className=\"h-4 w-4 rounded\" />}\r\n            <Skeleton className=\"h-6 w-16 rounded-md\" />\r\n          </div>\r\n        ))}\r\n        {field.tabs.length > 4 && <Skeleton className=\"h-7 w-8 rounded-md\" />}\r\n      </div>\r\n\r\n      {field.tabs[0]?.description && <Skeleton className=\"h-4 w-3/4 mb-4\" />}\r\n      {renderNestedSkeletons()}\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/buzzform/fields/tabs.tsx"
    }
  ],
  "type": "registry:ui"
}