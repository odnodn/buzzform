{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "number",
  "title": "NumberField",
  "description": "A number input field component for BuzzForm. Supports stepper variants (default, stacked, pill, plain), prefix/suffix, thousand separators, precision, and min/max constraints.",
  "dependencies": [
    "@buildnbuzz/buzzform"
  ],
  "registryDependencies": [
    "@buzzform/init",
    "input",
    "input-group",
    "field",
    "@buzzform/copy"
  ],
  "files": [
    {
      "path": "registry/base/fields/number.tsx",
      "content": "\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport type {\r\n  NumberField as NumberFieldType,\r\n  FormAdapter,\r\n} from \"@buildnbuzz/buzzform\";\r\nimport {\r\n  formatNumberWithSeparator,\r\n  parseFormattedNumber,\r\n  clampNumber,\r\n  applyNumericPrecision,\r\n  getFieldWidthStyle,\r\n} from \"@buildnbuzz/buzzform\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  InputGroup,\r\n  InputGroupAddon,\r\n  InputGroupButton,\r\n  InputGroupInput,\r\n} from \"@/components/ui/input-group\";\r\nimport {\r\n  Field,\r\n  FieldContent,\r\n  FieldDescription,\r\n  FieldError,\r\n  FieldLabel,\r\n} from \"@/components/ui/field\";\r\nimport { CopyButton } from \"@/components/buzzform/copy\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { IconPlaceholder } from \"@/components/icon-placeholder\";\r\n\r\nexport interface NumberFieldProps {\r\n  field: NumberFieldType;\r\n  path: string;\r\n  form: FormAdapter;\r\n  autoFocus?: boolean;\r\n  // Computed props\r\n  fieldId: string;\r\n  label: React.ReactNode | null;\r\n  isDisabled: boolean;\r\n  isReadOnly: boolean;\r\n  error?: string;\r\n}\r\n\r\nexport function NumberField({\r\n  field,\r\n  path,\r\n  form,\r\n  autoFocus,\r\n  fieldId,\r\n  label,\r\n  isDisabled,\r\n  isReadOnly,\r\n  error,\r\n}: NumberFieldProps) {\r\n  const value = form.watch<number>(path);\r\n  const hasError = !!error;\r\n\r\n  // UI options\r\n  const step = field.ui?.step ?? 1;\r\n  const variant = field.ui?.variant ?? \"default\";\r\n  const prefix = field.ui?.prefix;\r\n  const suffix = field.ui?.suffix;\r\n  const hideSteppers = field.ui?.hideSteppers || variant === \"plain\";\r\n  const thousandSeparator = field.ui?.thousandSeparator;\r\n  const copyable = field.ui?.copyable;\r\n  const sep = typeof thousandSeparator === \"string\" ? thousandSeparator : \",\";\r\n\r\n  // Display value for thousand separator mode\r\n  const [displayValue, setDisplayValue] = React.useState<string>(() =>\r\n    thousandSeparator && typeof value === \"number\"\r\n      ? formatNumberWithSeparator(value, sep)\r\n      : \"\"\r\n  );\r\n\r\n  // Sync display value when external value changes\r\n  React.useEffect(() => {\r\n    if (thousandSeparator && typeof value === \"number\") {\r\n      setDisplayValue(formatNumberWithSeparator(value, sep));\r\n    } else if (thousandSeparator && value === undefined) {\r\n      setDisplayValue(\"\");\r\n    }\r\n  }, [value, thousandSeparator, sep]);\r\n\r\n  const handleChange = (val: number | undefined) => {\r\n    if (isReadOnly) return;\r\n    // Apply precision if specified\r\n    const finalVal = applyNumericPrecision(val, field.precision);\r\n    form.setValue(path, finalVal, { shouldDirty: true });\r\n  };\r\n\r\n  const handleAdjust = (delta: number) => {\r\n    if (isReadOnly || isDisabled) return;\r\n    const current = typeof value === \"number\" ? value : (field.min ?? 0);\r\n    const next = clampNumber(current + delta, field.min, field.max);\r\n    handleChange(next);\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (isDisabled || isReadOnly) return;\r\n    if (e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      handleAdjust(step);\r\n    } else if (e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      handleAdjust(-step);\r\n    }\r\n  };\r\n\r\n  const handleFormattedInputChange = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ) => {\r\n    const inputVal = e.target.value;\r\n    setDisplayValue(inputVal);\r\n    const parsed = parseFormattedNumber(inputVal, sep);\r\n    handleChange(parsed);\r\n  };\r\n\r\n  const handleFormattedInputBlur = () => {\r\n    if (typeof value === \"number\") {\r\n      setDisplayValue(formatNumberWithSeparator(value, sep));\r\n    }\r\n  };\r\n\r\n  const renderInput = (className?: string) => {\r\n    // When thousandSeparator is enabled, use text input\r\n    if (thousandSeparator) {\r\n      return (\r\n        <InputGroupInput\r\n          id={fieldId}\r\n          type=\"text\"\r\n          inputMode=\"numeric\"\r\n          value={displayValue}\r\n          onChange={handleFormattedInputChange}\r\n          onBlur={handleFormattedInputBlur}\r\n          onKeyDown={handleKeyDown}\r\n          placeholder={field.placeholder}\r\n          className={cn(\r\n            hideSteppers ? \"\" : \"text-center\",\r\n            \"tabular-nums\",\r\n            className\r\n          )}\r\n          disabled={isDisabled}\r\n          readOnly={isReadOnly}\r\n          aria-invalid={hasError}\r\n          autoFocus={autoFocus}\r\n        />\r\n      );\r\n    }\r\n\r\n    // Standard number input\r\n    return (\r\n      <InputGroupInput\r\n        id={fieldId}\r\n        name={path}\r\n        type=\"number\"\r\n        value={value ?? \"\"}\r\n        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n          handleChange(\r\n            e.target.value === \"\" ? undefined : Number(e.target.value)\r\n          )\r\n        }\r\n        onKeyDown={handleKeyDown}\r\n        placeholder={field.placeholder}\r\n        className={cn(\r\n          hideSteppers\r\n            ? \"\"\r\n            : \"text-center [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none [-moz-appearance:textfield]\",\r\n          className\r\n        )}\r\n        disabled={isDisabled}\r\n        readOnly={isReadOnly}\r\n        min={field.min}\r\n        max={field.max}\r\n        step={step}\r\n        aria-invalid={hasError}\r\n        autoFocus={autoFocus}\r\n      />\r\n    );\r\n  };\r\n\r\n  const renderInputContent = () => {\r\n    // Plain variant - no steppers\r\n    if (hideSteppers) {\r\n      if (prefix || suffix || copyable) {\r\n        return (\r\n          <InputGroup className=\"h-8\">\r\n            {prefix && (\r\n              <InputGroupAddon\r\n                align=\"inline-start\"\r\n                className=\"px-3 text-muted-foreground text-sm\"\r\n              >\r\n                {prefix}\r\n              </InputGroupAddon>\r\n            )}\r\n            {renderInput()}\r\n            {suffix && (\r\n              <InputGroupAddon className=\"px-3 text-muted-foreground text-sm\">\r\n                {suffix}\r\n              </InputGroupAddon>\r\n            )}\r\n            {copyable && (\r\n              <InputGroupAddon align=\"inline-end\">\r\n                <CopyButton value={value?.toString() ?? \"\"} />\r\n              </InputGroupAddon>\r\n            )}\r\n          </InputGroup>\r\n        );\r\n      }\r\n      return (\r\n        <Input\r\n          id={fieldId}\r\n          type=\"number\"\r\n          value={value ?? \"\"}\r\n          onChange={(e) =>\r\n            handleChange(\r\n              e.target.value === \"\" ? undefined : Number(e.target.value)\r\n            )\r\n          }\r\n          onKeyDown={handleKeyDown}\r\n          placeholder={field.placeholder}\r\n          disabled={isDisabled}\r\n          readOnly={isReadOnly}\r\n          min={field.min}\r\n          max={field.max}\r\n          step={step}\r\n          aria-invalid={hasError}\r\n          autoFocus={autoFocus}\r\n          className=\"tabular-nums\"\r\n        />\r\n      );\r\n    }\r\n\r\n    // Stacked variant - vertical buttons on right\r\n    if (variant === \"stacked\") {\r\n      return (\r\n        <InputGroup className=\"h-8\">\r\n          {prefix && (\r\n            <InputGroupAddon\r\n              align=\"inline-start\"\r\n              className=\"px-3 text-muted-foreground text-sm\"\r\n            >\r\n              {prefix}\r\n            </InputGroupAddon>\r\n          )}\r\n          {renderInput(\"tabular-nums\")}\r\n          {suffix && (\r\n            <InputGroupAddon className=\"px-2 text-muted-foreground text-sm\">\r\n              {suffix}\r\n            </InputGroupAddon>\r\n          )}\r\n          <InputGroupAddon\r\n            align=\"inline-end\"\r\n            className=\"p-0 pr-0 h-full self-stretch\"\r\n          >\r\n            <div className=\"flex flex-col h-full border-l border-input -mr-px overflow-hidden rounded-r-lg\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => handleAdjust(step)}\r\n                disabled={isDisabled || isReadOnly}\r\n                className=\"flex-1 w-7 flex items-center justify-center border-b border-input text-muted-foreground hover:bg-accent hover:text-foreground transition-colors disabled:pointer-events-none disabled:opacity-50\"\r\n                aria-label=\"Increment\"\r\n              >\r\n                <IconPlaceholder\r\n                  lucide=\"Plus\"\r\n                  hugeicons=\"Add01Icon\"\r\n                  tabler=\"IconPlus\"\r\n                  phosphor=\"Plus\"\r\n                  remixicon=\"RiAddLine\"\r\n                  className=\"size-3\"\r\n                />\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => handleAdjust(-step)}\r\n                disabled={isDisabled || isReadOnly}\r\n                className=\"flex-1 w-7 flex items-center justify-center text-muted-foreground hover:bg-accent hover:text-foreground transition-colors disabled:pointer-events-none disabled:opacity-50\"\r\n                aria-label=\"Decrement\"\r\n              >\r\n                <IconPlaceholder\r\n                  lucide=\"Minus\"\r\n                  hugeicons=\"MinusSignIcon\"\r\n                  tabler=\"IconMinus\"\r\n                  phosphor=\"Minus\"\r\n                  remixicon=\"RiSubtractLine\"\r\n                  className=\"size-3\"\r\n                />\r\n              </button>\r\n            </div>\r\n          </InputGroupAddon>\r\n        </InputGroup>\r\n      );\r\n    }\r\n\r\n    // Pill variant - rounded with buttons on sides\r\n    if (variant === \"pill\") {\r\n      return (\r\n        <InputGroup className=\"h-9 rounded-full px-1.5\">\r\n          <InputGroupAddon align=\"inline-start\">\r\n            <InputGroupButton\r\n              variant=\"ghost\"\r\n              size=\"icon-xs\"\r\n              onClick={() => handleAdjust(-step)}\r\n              className=\"rounded-full\"\r\n              disabled={isDisabled || isReadOnly}\r\n              aria-label=\"Decrement\"\r\n            >\r\n              <IconPlaceholder\r\n                lucide=\"Minus\"\r\n                hugeicons=\"MinusSignIcon\"\r\n                tabler=\"IconMinus\"\r\n                phosphor=\"Minus\"\r\n                remixicon=\"RiSubtractLine\"\r\n                className=\"size-4\"\r\n              />\r\n            </InputGroupButton>\r\n          </InputGroupAddon>\r\n          {prefix && (\r\n            <span className=\"text-muted-foreground text-sm\">{prefix}</span>\r\n          )}\r\n          {renderInput()}\r\n          {suffix && (\r\n            <span className=\"text-muted-foreground text-sm\">{suffix}</span>\r\n          )}\r\n          <InputGroupAddon align=\"inline-end\">\r\n            <InputGroupButton\r\n              variant=\"ghost\"\r\n              size=\"icon-xs\"\r\n              onClick={() => handleAdjust(step)}\r\n              className=\"rounded-full\"\r\n              disabled={isDisabled || isReadOnly}\r\n              aria-label=\"Increment\"\r\n            >\r\n              <IconPlaceholder\r\n                lucide=\"Plus\"\r\n                hugeicons=\"Add01Icon\"\r\n                tabler=\"IconPlus\"\r\n                phosphor=\"Plus\"\r\n                remixicon=\"RiAddLine\"\r\n                className=\"size-4\"\r\n              />\r\n            </InputGroupButton>\r\n          </InputGroupAddon>\r\n        </InputGroup>\r\n      );\r\n    }\r\n\r\n    // Default variant - inline buttons on sides\r\n    return (\r\n      <InputGroup className=\"h-8\">\r\n        <InputGroupAddon align=\"inline-start\">\r\n          <InputGroupButton\r\n            variant=\"ghost\"\r\n            size=\"icon-xs\"\r\n            onClick={() => handleAdjust(-step)}\r\n            disabled={isDisabled || isReadOnly}\r\n            aria-label=\"Decrement\"\r\n          >\r\n            <IconPlaceholder\r\n              lucide=\"Minus\"\r\n              hugeicons=\"MinusSignIcon\"\r\n              tabler=\"IconMinus\"\r\n              phosphor=\"Minus\"\r\n              remixicon=\"RiSubtractLine\"\r\n              className=\"size-3.5\"\r\n            />\r\n          </InputGroupButton>\r\n        </InputGroupAddon>\r\n        {prefix && (\r\n          <span className=\"text-muted-foreground text-sm pl-1\">{prefix}</span>\r\n        )}\r\n        {renderInput()}\r\n        {suffix && (\r\n          <span className=\"text-muted-foreground text-sm pr-1\">{suffix}</span>\r\n        )}\r\n        <InputGroupAddon align=\"inline-end\">\r\n          <InputGroupButton\r\n            variant=\"ghost\"\r\n            size=\"icon-xs\"\r\n            onClick={() => handleAdjust(step)}\r\n            disabled={isDisabled || isReadOnly}\r\n            aria-label=\"Increment\"\r\n          >\r\n            <IconPlaceholder\r\n              lucide=\"Plus\"\r\n              hugeicons=\"Add01Icon\"\r\n              tabler=\"IconPlus\"\r\n              phosphor=\"Plus\"\r\n              remixicon=\"RiAddLine\"\r\n              className=\"size-3.5\"\r\n            />\r\n          </InputGroupButton>\r\n        </InputGroupAddon>\r\n      </InputGroup>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Field\r\n      className={field.style?.className}\r\n      data-invalid={hasError}\r\n      data-disabled={isDisabled}\r\n      style={getFieldWidthStyle(field.style)}\r\n    >\r\n      {label && (\r\n        <FieldLabel htmlFor={fieldId}>\r\n          {field.required && <span className=\"text-destructive mr-0.5\">*</span>}\r\n          {label}\r\n        </FieldLabel>\r\n      )}\r\n\r\n      <FieldContent>{renderInputContent()}</FieldContent>\r\n\r\n      {field.description && (\r\n        <FieldDescription id={`${fieldId}-description`}>\r\n          {field.description}\r\n        </FieldDescription>\r\n      )}\r\n\r\n      {error && <FieldError>{error}</FieldError>}\r\n    </Field>\r\n  );\r\n}\r\n\r\nexport function NumberFieldSkeleton({ field }: { field: NumberFieldType }) {\r\n  const label = field.label !== false ? (field.label ?? field.name) : null;\r\n  const variant = field.ui?.variant ?? \"default\";\r\n  const hideSteppers = field.ui?.hideSteppers || variant === \"plain\";\r\n  const hasPrefix = Boolean(field.ui?.prefix);\r\n  const hasSuffix = Boolean(field.ui?.suffix);\r\n\r\n  const stepperSkeleton = (\r\n    <div className=\"size-6 rounded animate-pulse bg-muted\" />\r\n  );\r\n\r\n  const renderInputSkeleton = () => {\r\n    if (hideSteppers) {\r\n      return (\r\n        <div className=\"flex items-center h-9 border rounded-lg px-3 gap-2\">\r\n          {hasPrefix && (\r\n            <div className=\"h-4 w-6 animate-pulse bg-muted rounded\" />\r\n          )}\r\n          <div className=\"h-4 flex-1 animate-pulse bg-muted rounded\" />\r\n          {hasSuffix && (\r\n            <div className=\"h-4 w-8 animate-pulse bg-muted rounded\" />\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (variant === \"stacked\") {\r\n      return (\r\n        <div className=\"flex items-center h-8 border rounded-lg\">\r\n          {hasPrefix && (\r\n            <div className=\"h-4 w-6 ml-3 animate-pulse bg-muted rounded\" />\r\n          )}\r\n          <div className=\"h-4 flex-1 mx-3 animate-pulse bg-muted rounded\" />\r\n          {hasSuffix && (\r\n            <div className=\"h-4 w-8 mr-2 animate-pulse bg-muted rounded\" />\r\n          )}\r\n          <div className=\"flex flex-col w-7 border-l h-full\">\r\n            <div className=\"h-1/2 w-full animate-pulse bg-muted\" />\r\n            <div className=\"h-1/2 w-full animate-pulse bg-muted\" />\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (variant === \"pill\") {\r\n      return (\r\n        <div className=\"flex items-center h-8 border rounded-full px-2 gap-2\">\r\n          {stepperSkeleton}\r\n          {hasPrefix && (\r\n            <div className=\"h-4 w-6 animate-pulse bg-muted rounded\" />\r\n          )}\r\n          <div className=\"h-4 flex-1 animate-pulse bg-muted rounded\" />\r\n          {hasSuffix && (\r\n            <div className=\"h-4 w-8 animate-pulse bg-muted rounded\" />\r\n          )}\r\n          {stepperSkeleton}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Default variant\r\n    return (\r\n      <div className=\"flex items-center h-8 border rounded-lg px-2 gap-2\">\r\n        {stepperSkeleton}\r\n        {hasPrefix && (\r\n          <div className=\"h-4 w-6 animate-pulse bg-muted rounded\" />\r\n        )}\r\n        <div className=\"h-4 flex-1 animate-pulse bg-muted rounded\" />\r\n        {hasSuffix && (\r\n          <div className=\"h-4 w-8 animate-pulse bg-muted rounded\" />\r\n        )}\r\n        {stepperSkeleton}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Field\r\n      className={field.style?.className}\r\n      style={\r\n        field.style?.width\r\n          ? {\r\n              width:\r\n                typeof field.style.width === \"number\"\r\n                  ? `${field.style.width}px`\r\n                  : field.style.width,\r\n            }\r\n          : undefined\r\n      }\r\n    >\r\n      {label && <div className=\"h-4 w-20 animate-pulse rounded bg-muted\" />}\r\n      <FieldContent>{renderInputSkeleton()}</FieldContent>\r\n      {field.description && (\r\n        <div className=\"h-3 w-48 animate-pulse rounded bg-muted\" />\r\n      )}\r\n    </Field>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/buzzform/fields/number.tsx"
    }
  ],
  "type": "registry:ui"
}