{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "support-ticket-form",
  "title": "Support Ticket Form",
  "description": "A detailed form for submitting support requests.",
  "dependencies": [
    "sonner"
  ],
  "registryDependencies": [
    "@buzzform/starter",
    "card",
    "select"
  ],
  "files": [
    {
      "path": "registry/base/examples/support-ticket-form.tsx",
      "content": "\"use client\";\r\n\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport {\r\n  Form,\r\n  FormContent,\r\n  FormFields,\r\n  FormSubmit,\r\n} from \"@/registry/base/form\";\r\nimport { toast } from \"sonner\";\r\nimport { createSchema, InferType } from \"@buildnbuzz/buzzform\";\r\nimport type { ValidationContext } from \"@buildnbuzz/buzzform\";\r\n\r\nconst categoryOptions = [\r\n  {\r\n    value: \"technical\",\r\n    label: \"Technical Issue\",\r\n    description: \"Software bugs, errors, or crashes\",\r\n  },\r\n  {\r\n    value: \"billing\",\r\n    label: \"Billing & Payments\",\r\n    description: \"Invoices, refunds, or payment methods\",\r\n  },\r\n  {\r\n    value: \"account\",\r\n    label: \"Account\",\r\n    description: \"Password, profile, or security settings\",\r\n  },\r\n  {\r\n    value: \"feature\",\r\n    label: \"Feature Request\",\r\n    description: \"Suggest new features or improvements\",\r\n  },\r\n];\r\n\r\nconst subcategoryMap: Record<\r\n  string,\r\n  Array<{ value: string; label: string }>\r\n> = {\r\n  technical: [\r\n    { value: \"bug\", label: \"Bug Report\" },\r\n    { value: \"crash\", label: \"Application Crash\" },\r\n    { value: \"performance\", label: \"Performance Issue\" },\r\n    { value: \"integration\", label: \"Integration Problem\" },\r\n  ],\r\n  billing: [\r\n    { value: \"invoice\", label: \"Invoice Question\" },\r\n    { value: \"refund\", label: \"Refund Request\" },\r\n    { value: \"upgrade\", label: \"Plan Upgrade\" },\r\n    { value: \"payment\", label: \"Payment Failed\" },\r\n  ],\r\n  account: [\r\n    { value: \"password\", label: \"Password Reset\" },\r\n    { value: \"2fa\", label: \"Two-Factor Auth\" },\r\n    { value: \"profile\", label: \"Profile Update\" },\r\n    { value: \"delete\", label: \"Delete Account\" },\r\n  ],\r\n  feature: [\r\n    { value: \"ui\", label: \"UI Improvement\" },\r\n    { value: \"api\", label: \"API Feature\" },\r\n    { value: \"mobile\", label: \"Mobile App\" },\r\n    { value: \"other\", label: \"Other\" },\r\n  ],\r\n};\r\n\r\nconst priorityOptions = [\r\n  { value: \"low\", label: \"Low\", description: \"No impact on work\" },\r\n  { value: \"medium\", label: \"Medium\", description: \"Some features affected\" },\r\n  { value: \"high\", label: \"High\", description: \"Major functionality impacted\" },\r\n  { value: \"urgent\", label: \"Urgent\", description: \"Complete blocker\" },\r\n];\r\n\r\nconst teamMembers = [\r\n  { value: \"alice\", label: \"Alice Johnson\" },\r\n  { value: \"bob\", label: \"Bob Smith\" },\r\n  { value: \"carol\", label: \"Carol Williams\" },\r\n  { value: \"david\", label: \"David Brown\" },\r\n  { value: \"emma\", label: \"Emma Davis\" },\r\n];\r\n\r\nasync function getSubcategories(context: ValidationContext) {\r\n  const category = context.data?.category as string | undefined;\r\n  if (!category) return [];\r\n\r\n  // Simulate API delay\r\n  await new Promise((resolve) => setTimeout(resolve, 300));\r\n  return subcategoryMap[category] || [];\r\n}\r\n\r\n// Support ticket form showcasing dynamic options\r\nconst ticketSchema = createSchema([\r\n  {\r\n    type: \"select\",\r\n    name: \"category\",\r\n    label: \"Category\",\r\n    required: true,\r\n    options: categoryOptions,\r\n    placeholder: \"Choose a category...\",\r\n  },\r\n  {\r\n    type: \"select\",\r\n    name: \"subcategory\",\r\n    label: \"Subcategory\",\r\n    required: true,\r\n    options: getSubcategories,\r\n    dependencies: [\"category\"],\r\n    placeholder: \"Select subcategory...\",\r\n    disabled: (data: { category?: string }) => !data.category,\r\n    description: \"Options update based on selected category\",\r\n    ui: {\r\n      loadingMessage: \"Loading subcategories...\",\r\n      emptyMessage: \"Select a category first\",\r\n    },\r\n  },\r\n  {\r\n    type: \"select\",\r\n    name: \"priority\",\r\n    label: \"Priority\",\r\n    required: true,\r\n    options: priorityOptions,\r\n    placeholder: \"Set priority...\",\r\n  },\r\n  {\r\n    type: \"select\",\r\n    name: \"assignees\",\r\n    label: \"Assign To\",\r\n    hasMany: true,\r\n    options: teamMembers,\r\n    placeholder: \"Select team members...\",\r\n    description: \"Optionally assign to team members\",\r\n    ui: {\r\n      isClearable: true,\r\n      maxVisibleChips: 2,\r\n    },\r\n  },\r\n]);\r\n\r\ntype TicketSchema = InferType<typeof ticketSchema>;\r\n\r\nexport default function SupportTicketForm() {\r\n  return (\r\n    <Card className=\"w-full max-w-md mx-auto\">\r\n      <CardHeader>\r\n        <CardTitle>Submit Support Ticket</CardTitle>\r\n        <CardDescription>\r\n          Dynamic dropdowns with dependent options and multi-select\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <Form\r\n          schema={ticketSchema}\r\n          onSubmit={async (data: TicketSchema) => {\r\n            await new Promise((resolve) => setTimeout(resolve, 1000));\r\n            toast(\"Ticket Submitted!\", {\r\n              description: (\r\n                <pre className=\"mt-2 max-h-48 overflow-auto rounded-md bg-zinc-950 p-3 text-xs\">\r\n                  <code>{JSON.stringify(data, null, 2)}</code>\r\n                </pre>\r\n              ),\r\n            });\r\n          }}\r\n        >\r\n          <FormContent>\r\n            <FormFields />\r\n            <div className=\"flex justify-end pt-4\">\r\n              <FormSubmit>Submit Ticket</FormSubmit>\r\n            </div>\r\n          </FormContent>\r\n        </Form>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/buzzform/examples/support-ticket-form.tsx"
    }
  ],
  "type": "registry:block"
}